javascript:'use strict';(function(){function a(c){function d(m){var n=c.indexOf(m);c[n]&&c.splice(n,1)}function e(m){window.optly.ui.showCustomDialog({title:'Results',message:m})}c.map(function(m){return m.replace(/\s*[\[{(]primary[)}\]]\s*$/i,'')});var f=window.optly.page.experiment.projectId,h=window.optly.page.experiment.experimentId,j=window.optly.page.goalDialog.stateStack;c.length&&$.get('https://app.optimizely.com/api/project/'+f+'/goal.json?unaddable_included_experiment_id='+h,function(m){var q=[],r=(m.goals||{}).filter(function(v){return!(-1!==v.experiment_ids.indexOf(h))||(d(v.title),!1)}),n=[];for(var o in c){var s=void 0,t=c[o];for(var p in r){var u=r[p];if(u.title===t)if(!s)s=u;else{console.log('found duplicate of ',t),s=void 0;break}}s?(q.push(s),console.log('Found',t)):(n.push(t),console.log('Unable to find',t))}if(q.length){e('Adding these goals to the experiment:\n'+q.map(function(v){return v.title}).join(',\n')),console.log('Adding these goals to the experiment:',q);var _loop=function(){var v=q[p];$.post('https://app.optimizely.com/api/experiments/'+h+'/goal.json',{goal_id:v.goal_id},function(w){w.succeeded?console.log('Successfully added goal:',v.title):(e('API ERROR!'),console.warn('API error:',w))})};for(var p in q)_loop()}else e('No goals to be added.'),console.log('No goals to be added.');n.length&&(e('Unable to add these goals:\n'+n.join(',\n')),console.warn('Unable to add these goals:',n))})}var b={template:'\n    <div class="dialog--narrow lego-dialog">\n      <div class="lego-dialog__header">\n        <div class="lego-dialog__title">'+tr('[[ title ]]')+'</div>\n        </div> <div class="lego-dialog__body">\n          <p class="weight--bold" data-test-section="alert-dialog-message">'+tr('[[ description ]]')+'</p>\n          <textarea id="text" style="width: 100%; height: 200px; resize: vertical;"></textarea>\n        </div>\n        <div class="lego-dialog__footer lego-button-row--right">\n          <button type="button" class="lego-button lego-button--plain" v-hide-dialog="" data-test-section="confirm-cancel-button">'+tr('[[ cancelText ]]')+'</button>\n          <button type="submit" class="lego-button" data-test-section="confirm-submit-button" v-class="lego-button--danger: isWarning, lego-button--highlight: !isWarning" v-on="click: accept">'+tr('[[ confirmText ]]')+'</button>\n        </div>\n      </div>\n    </div>',methods:{accept:function accept(){var c=$(this.$el).find('#text').val().split('\n');a(c),this.$dispatch('hideDialog')}},defaultData:{title:'Quick-Add Goals',description:'Paste in goals (one per line) to be added to the experiment:',confirmText:'Accept',cancelText:'Cancel'}};window.optly.ui.showDialog({component:b})})();