javascript:"use strict";!function(){var a=window.open("about:blank"),b=new XMLHttpRequest;b.onreadystatechange=function(){if(4==b.readyState&&200==b.status){var h,c=JSON.parse(b.responseText),d={description:c.name,edit_url:"",trello_card:c.url,hypothesis:"",target_urls:[]},e=c.desc.replace(/”|“/g,'"').replace(/[\u00A0-\u2666]/g,function(a){return"&#"+a.charCodeAt(0)+";"}),f=/(https?:\/\/)?[^\.\s]+(\.[^\.\/\s]+)+[^\s(\[]+/g,g=e.split(/\*\*([\w ]+):? ?\*\*\n*/g);for(var i in g){var j=g[i].trim();if(j)if(i%2==1)h=j.toLowerCase().replace(" ","_");else if("hypothesis"==h){var k=j.split(/\n\n/g),l="",m=[];for(var i in k){var n=k[i];"Original:"==n.substr(0,9)?m=n.split("\n"):l+=n}m.length&&(d.variations=m),d[h]=l}else"dev_notes"==h||"notes"==h?d[h]=j:"target_urls"==h||"target_url"==h?(h="target_urls",d[h]=j.match(f)||[]):"variations"!=h&&"target_urls"!=h&&"audience_targeting"!=h&&"goals"!=h||(d[h]=j.split(/\n+/g))}d.target_urls.length&&(d.edit_url=d.target_urls[0]),d.edit_url.length&&"http"!=d.edit_url.substr(0,4).toLowerCase()&&(d.edit_url="http://"+d.edit_url),console.log(d);var o="\n            var _code = document.getElementById('code'),\n                _command = document.getElementById('command');\n            \n            function refresh(){\n                try{\n                    var json = JSON.parse(_code.innerHTML);\n                    _command.innerHTML = 'crowrap new json ' + btoa(JSON.stringify(json));\n                }catch(ex){\n                    _command.innerHTML = 'INVALID JSON';\n                }\n            }\n            refresh();\n            _command.focus();\n            document.execCommand('selectAll');\n            document.execCommand('copy');\n\n            document.addEventListener('keyup', function (e) {\n                console.log('pressed', e);\n                if (e.key != 'Meta' && e.key != 'Control'){\n                    refresh();\n                }\n            });\n            ",p='<html><pre><code id="code" style="display: block;" contenteditable>'+JSON.stringify(d,null,2)+'</code></pre><div id="command" contenteditable></div><script>'+o+"</script></html>";a.location="data:text/html;base64,"+btoa(p)}},b.open("GET",location.href+".json",!0),b.send()}();