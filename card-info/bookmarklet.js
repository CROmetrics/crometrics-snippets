javascript:"use strict";!function(){var e=window.open("about:blank"),t=new XMLHttpRequest;t.onreadystatechange=function(){if(4==t.readyState&&200==t.status){var n,r=JSON.parse(t.responseText),o={description:r.name,edit_url:"",trello_card:r.url,hypothesis:"",target_urls:[]},a=r.desc.replace(/”|“/g,'"').replace(/[\u00A0-\u2666]/g,function(e){return"&#"+e.charCodeAt(0)+";"}),s=/(https?:\/\/)?[^\.\s]+(\.[^\.\/\s]+)+[^\s(\[]+/g,i=a.split(/\*\*([\w ]+):? ?\*\*\n*/g);for(var l in i){var c=i[l].trim();if(c)if(l%2==1)n=c.toLowerCase().replace(" ","_");else if("hypothesis"==n){var d=c.split(/\n\n/g),u="",m=[];for(var l in d){var p=d[l];"Original:"==p.substr(0,9)?m=p.split("\n"):u+=p}m.length&&(o.variations=m),o[n]=u}else"dev_notes"==n||"notes"==n?o[n]=c:"target_urls"==n||"target_url"==n?(n="target_urls",o[n]=c.match(s)):("variations"==n||"target_urls"==n||"audience_targeting"==n||"goals"==n)&&(o[n]=c.split(/\n+/g))}o.target_urls.length&&(o.edit_url=o.target_urls[0]),o.edit_url.length&&"http"!=o.edit_url.substr(0,4).toLowerCase()&&(o.edit_url="http://"+o.edit_url),console.log(o);var g="\n            var _code = document.getElementById('code'),\n                _command = document.getElementById('command');\n            \n            function refresh(){\n                try{\n                    var json = JSON.parse(_code.innerHTML);\n                    _command.innerHTML = 'crowrap new json ' + btoa(JSON.stringify(json));\n                }catch(ex){\n                    _command.innerHTML = 'INVALID JSON';\n                }\n            }\n            refresh();\n            _command.focus();\n            document.execCommand('selectAll');\n            document.execCommand('copy');\n\n            document.addEventListener('keyup', function (e) {\n                console.log('pressed', e);\n                if (e.key != 'Meta' && e.key != 'Control'){\n                    refresh();\n                }\n            });\n            ",_='<html><pre><code id="code" style="display: block;" contenteditable>'+JSON.stringify(o,null,2)+'</code></pre><div id="command" contenteditable></div><script>'+g+"</script></html>";e.location="data:text/html;base64,"+btoa(_)}},t.open("GET",location.href+".json",!0),t.send()}();